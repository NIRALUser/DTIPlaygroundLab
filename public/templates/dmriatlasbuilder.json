{
  "name" : "dmriatlasbuilder",
  "parameter_groups":
  {
    "affine_atlas": {
          "caption" : "Affine Atlas",
          "parameters":[
               {
                  "name" : "m_BFAffineTfmMode",
                  "caption": "BF Affine tfm Mode",
                  "value": "useCenterOfHeadAlign",
                  "type": "select",
                  "description" : "None",
                  "candidates" : [
                    {
                      "value": "useCenterOfHeadAlign",
                      "caption": "Center of head align",
                      "description": "Center of head align"
                    },
                    {
                      "value": "useGeometryAlign",
                      "caption": "Use Geometry Align",
                      "description": "Nothing"
                    },
                    {
                      "value": "UseMomentsAlign",
                      "caption": "Use Moments Align",
                      "description": "Nothing"
                    },
                    {
                      "value": "Off",
                      "caption": "Off",
                      "description": "Nothing"
                    }           
                  ]
               },
               {
                  "name" : "m_nbLoops",
                  "caption" : "Number of Iterations",
                  "value" : 2,
                  "type": "number",
                  "description" : "None"
               },
               {
                  "name" : "m_NeedToBeCropped",
                  "caption" : "To Crop",
                  "value" : false,
                  "type": "checkbox",
                  "description" : "None"
               },
               {
                  "name" : "m_CropSize",
                  "caption": "Cropping Sizes",
                  "value": [50,50,50],
                  "type": "list",
                  "size": 3,
                  "description" : "None"
               },
               {
                  "name" : "m_ScalarMeasurement",
                  "caption" : "Scalar Measurement Type",
                  "value" : "FA",
                  "type": "select",
                  "description" : "None",
                  "candidates" : [
                    {
                      "value": "FA",
                      "caption": "FA",
                      "description": "None"
                    },
                    {
                      "value": "MD",
                      "caption": "MD",
                      "description": "Nothing"
                    }
                  ]
               },
               {
                  "name" : "m_RegType",
                  "caption" : "Use the First Image as the Registration Template",
                  "value" : true,
                  "type": "checkbox",
                  "description" : "If checked, use the first image as reference in the first Registration Loop"
               },     
               {
                  "name" : "m_TemplatePath",
                  "caption" : "Template Path",
                  "if" : {
                      "m_RegType" : false
                  },
                  "value" : "",
                  "type": "filepath-remote",
                  "description" : "None"
               }
               
             ]
    },
    "diffeomorphic_atlas": {
          "caption" : "Diffeormorphic Atlas",
          "parameters":[
               {
                  "name" : "m_InterpolType",
                  "caption" : "Resampling Interpolation type",
                  "value" : "Linear",
                  "type": "select",
                  "description" : "None",
                  "candidates" : [
                    {
                      "value": "Linear",
                      "caption": "Linear",
                      "description": "None"
                    },
                    {
                      "value": "Nearest Neighborhood",
                      "caption": "Nearest Neighborhood",
                      "description": "Nothing"
                    },
                    {
                      "value": "BSpline",
                      "caption": "BSpline",
                      "description": "Nothing"
                    },
                    {
                      "value": "Windowed Sinc",
                      "caption": "Windowed Sinc",
                      "description": "Nothing"
                    }
                  ]
               },
               {
                  "name" : "m_InterpolOption",
                  "caption" : "Resampling Interpolation Option",
                  "value" : "Cosine",
                  "type": "select",
                  "if" : {
                    "m_InterpolType" : "Windowed Sinc"
                  },
                  "candidates":[
                    {
                      "value": "Hamming",
                      "caption": "Hamming",
                      "description": "Hamming"
                    },
                    {
                      "value": "Cosine",
                      "caption": "Cosine",
                      "description": "Cosine"
                    },
                    {
                      "value": "Welch",
                      "caption": "Welch",
                      "description": "Welch"
                    },
                    {
                      "value": "Lanczos",
                      "caption": "Lanczos",
                      "description": "Lanczos"
                    },
                    {
                      "value": "Blackman",
                      "caption": "Blackman",
                      "description": "Blackman"
                    }
                  ],
                  "description" : "None"
               },
               {
                  "name" : "m_TensInterpol",
                  "caption" : "Tensor Interpolation",
                  "value" : "Log Euclidean",
                  "type": "select",
                  "description" : "None",
                  "candidates" : [
                    {
                      "value": "Log Euclidean",
                      "caption": "Log Euclidean",
                      "description": "None"
                    },
                    {
                      "value": "Non Log Euclidean",
                      "caption": "Non Log Euclidean",
                      "description": "Nothing"
                    }
                  ]
               },
               {
                  "name" : "m_InterpolLogOption",
                  "caption" : "Tensor Interpolation Correction",
                  "if" : {
                    "m_TensInterpol" : "Non Log Euclidean"
                  },
                  "value" : "None",
                  "type": "select",
                  "candidates":[
                    {
                      "value": "Zero",
                      "caption": "Zero",
                      "description": "Zero"
                    },
                    {
                      "value": "None",
                      "caption": "None",
                      "description": "None"
                    },
                    {
                      "value": "Absolute Value",
                      "caption": "Absolute Value",
                      "description": "Absolute Value"
                    },
                    {
                      "value": "Nearest",
                      "caption": "Nearest",
                      "description": "Nearest"
                    }
                  ],
                  "description" : "None"
               },
               {
                  "name" : "m_TensTfm",
                  "caption" : "Tensor Transformation",
                  "value" : "Preservation of the Principal Direction (PPD)",
                  "type": "select",
                  "description" : "None",
                  "candidates" : [
                    {
                      "value": "Preservation of the Principal Direction (PPD)",
                      "caption": "Preservation of the Principal Direction (PPD)",
                      "description": "None"
                    },
                    {
                      "value": "Finite Strain (FS)",
                      "caption": "Finite Strain (FS)",
                      "description": "Nothing"
                    }
                  ]
               }
          ]
    },
    "final_resample" : {
          "caption" : "Final Resampling",
          "parameters":[
               {
                  "name": "m_RegMethod",
                  "caption": "Registration Method",
                  "type" : "select",
                  "value" : "ANTS",
                  "description" : "NA",
                  "candidates": [
                       {
                          "value" : "ANTS",
                          "caption" : "ANTS",
                          "description" : "None"
                       },
                       {
                          "value" : "BRAINS",
                          "caption" : "BRAINS",
                          "description" : "None"
                       }
                  ]
               },
               {
                  "name" : "m_DTIRegOptions_BRAINS",
                  "caption": "DTIReg Options",
                  "if" : { "m_RegMethod" : "BRAINS" },
                  "value": ["BRAINS", "Diffeomorphic", "Use computed affine transform",5,"300,50,30,20,15"],
                  "type": "component",
                  "description" : "None",
                  "components":{
                    "caption" : "BRAINS Subparameters",
                    "parameters" :[
                            { 
                                "name" : 0,
                                "caption": "Registration Method",
                                "type" : "label",
                                "value" : "BRAINS",
                                "hidden": true,
                                "disabled": false,
                                "description": "Fixed parameter"
                            },
                            {
                                "name" : 1,
                                "caption" : "Registration Type",
                                "value" : "Diffeomorphic",
                                "type" : "select",
                                "description" : "Type of registration to apply",
                                "candidates" : [
                                        {
                                          "value": "None",
                                          "caption": "None",
                                          "description": "None"
                                        },
                                        {
                                          "value": "Rigid",
                                          "caption": "Rigid",
                                          "description": "Rigid"                        
                                        },
                                        {
                                          "value": "BSpline",
                                          "caption": "BSpline",
                                          "description": "BSpline"                        
                                        },
                                        {
                                          "value": "Diffeomorphic",
                                          "caption": "Diffeomorphic",
                                          "description": "Diffeomorphic"                        
                                        },
                                        {
                                          "value": "Demons",
                                          "caption": "Demons",
                                          "description": "Demons"                        
                                        },
                                        {
                                          "value": "FastSymmetricForces",
                                          "caption": "FastSymmetricForces",
                                          "description": "FastSymmetricForces"                        
                                        }                                   
                                ]
                            },
                            {
                                "name": 2,
                                "caption" : "Transform Mode",
                                "value" : "Use computed affine transform",
                                "type" : "select",
                                "description" : "Transform mode",
                                "candidates" : [
                                        {
                                          "value": "Off",
                                          "caption": "Off",
                                          "description": "Off"
                                        },
                                        {
                                          "value": "UseMomentsAlign",
                                          "caption": "UseMomentsAlign",
                                          "description": "UseMomentsAlign"                        
                                        },
                                        {
                                          "value": "useCenterOfHeadAlign",
                                          "caption": "useCenterOfHeadAlign",
                                          "description": "useCenterOfHeadAlign"                        
                                        },
                                        {
                                          "value": "useGeometryAlign",
                                          "caption": "useGeometryAlign",
                                          "description": "useGeometryAlign"                        
                                        },
                                        {
                                          "value": "Use computed affine transform",
                                          "caption": "Use computed affine transform",
                                          "description": "Use computed affine transform"                        
                                        }                            
                                ]
                            },
                            {
                                    "name" : 3,
                                    "caption" : "Number of Pyramid Levels",
                                    "type" : "number",
                                    "value" : 5,
                                    "description" : "Number of pyramid levels"
                            },
                            {
                                    "name" : 4,
                                    "caption" : "Number of Pyramid Levels",
                                    "type" : "string",
                                    "value" : "300,50,30,20,15",
                                    "description" : "Number of pyramid levels"
                            }
                    ]
                  }
               },
               {
                  "name" : "m_DTIRegExtraPath",
                  "caption" : "ANTS Directory",
                  "value" : "",
                  "if" :{
                    "m_RegMethod" : "ANTS"
                  },
                  "type": "filepath-remote",
                  "description" : "None"
               },  
               {
                  "name" : "m_DTIRegOptions_ANTS",
                  "caption": "DTIReg Options",
                  "if" : { "m_RegMethod" : "ANTS" },
                  "value": ["ANTS", "GreedyDiffeo (SyN)", "0.25", "100x50x25", "Cross-Correlation (CC)", "2","3",false],
                  "type": "component",
                  "description" : "None",
                  "components":
                  {
                    "caption" : "ANTS Subparameters", 
                    "parameters":[
                                  { "name" : 0,
                                    "caption": "Registration Method",
                                    "type" : "label",
                                    "value" : "ANTS",
                                    "hidden": true,
                                    "disabled": false,
                                    "description" : "Fixed parameter"
                                  },
                                  {
                                    "name": 1,
                                    "caption": "Registration Type",
                                    "type" : "select",
                                    "value" : "GreedyDiffeo (SyN)",
                                    "description" : "NA",
                                    "disabled" : false,
                                    "candidates": [
                                        {
                                          "value": "None",
                                          "caption": "None",
                                          "description": "NA"
                                        },
                                        {
                                          "value": "Rigid",
                                          "caption": "Rigid",
                                          "description": "NA"                        
                                        },
                                        {
                                          "value": "Elast",
                                          "caption": "Elast",
                                          "description": "NA"                        
                                        },
                                        {
                                          "value": "Exp",
                                          "caption": "Exp",
                                          "description": "NA"                        
                                        },
                                        {
                                          "value": "GreedyExp",
                                          "caption": "GreedyExp",
                                          "description": "NA"                        
                                        },
                                        {
                                          "value": "GreedyDiffeo (SyN)",
                                          "caption": "GreedyDiffeo (SyN)",
                                          "description": "NA"                        
                                        },
                                        {
                                          "value": "SpatioTempDiffeo (SyN)",
                                          "caption": "SpatioTempDiffeo (SyN)",
                                          "description": "NA"                        
                                        }
                                    ]
                                  },
                                  {
                                    "name" : 2,
                                    "caption" : "Transformation Step",
                                    "type" : "number",
                                    "value" : 0.25,
                                    "description" : "NA"
                                  },
                                  {
                                    "name" : 3,
                                    "caption" : "Iterations",
                                    "type" : "string",
                                    "value" : "100x50x25",
                                    "description" : "3 dimensional expression such as 100x50x25"
                                  },
                                  {
                                    "name" : 4,
                                    "caption" : "Similarity Metric",
                                    "type" : "select",
                                    "value" : "Cross-Correlation (CC)",
                                    "description" : "Similarity Metric",
                                    "candidates" : [
                                        {
                                          "value": "Cross-Correlation (CC)",
                                          "caption": "Cross-Correlation (CC)",
                                          "description": "Cross-Correlation"
                                        },
                                        {
                                          "value": "Mutual Information (MI)",
                                          "caption": "Mutual Information (MI)",
                                          "description": "Mutual Information"
                                        },{
                                          "value": "Mean Square Difference (MSQ)",
                                          "caption": "Mean Square Difference (MSQ)",
                                          "description": "Mutual Mean Square Difference"
                                        }
                                    ]
                                  },
                                  {
                                    "name" : 5,
                                    "caption" : "Similarity Parameter",
                                    "type" : "number",
                                    "value" : 2.00,
                                    "description" : "NA"
                                  },
                                  {
                                    "name" : 6,
                                    "caption" : "Gaussian Sigma",
                                    "type" : "number",
                                    "value" : 3.00,
                                    "description" : "NA"
                                  },
                                  {
                                    "name" : 7,
                                    "caption" : "Gaussian Smoothing Off",
                                    "type" : "checkbox",
                                    "value" : false,
                                    "description" : "NA"
                                  }
                              ]
                  }
               },
               {
                  "name" : "m_nbLoopsDTIReg",
                  "caption" : "Number of interations with DTIReg",
                  "value" : 3,
                  "type": "number",
                  "disabled": false,
                  "description" : "None"
               }
          ]
    },
    "execution": {
          "caption" : "Affine Atlas",
          "parameters":[
               {
                  "name" : "m_OutputPath",
                  "caption" : "Output Path",
                  "value" : "",
                  "type": "filepath-remote",
                  "description" : "None"
               },
               {
                  "name" : "m_NbThreadsString",
                  "caption" : "Number of threads to use",
                  "value" : 3,
                  "type": "number",
                  "description" : "None"
               },
               {
                  "name" : "m_Overwrite",
                  "caption" : "Overwrite",
                  "value" : true,
                  "type": "checkbox",
                  "description" : "None"
               },
               {
                  "name" : "m_PythonPath",
                  "caption" : "Python Path",
                  "value" : "/usr/bin/python",
                  "type": "filepath-remote",
                  "description" : "None"
               },
               {
                  "name" : "m_useGridProcess",
                  "caption" : "Use Grid Processing",
                  "value" : false,
                  "type": "checkbox",
                  "description" : "None"
               },
               {
                  "name" : "m_GridAtlasCommand",
                  "caption" : "Grid Atlas Command (optional)",
                  "value" : "",
                  "if": {
                    "m_useGridProcess" : true
                  },
                  "optional": true,
                  "type": "string",
                  "description" : "None"
               },
               {
                  "name" : "m_GridGeneralCommand",
                  "caption" : "Grid General Computing Command (optional)",
                  "value" : "",
                  "if": {
                    "m_useGridProcess" : true
                  },
                  "optional" : true,
                  "type": "string",
                  "description" : "None"
               }

          ]
    }
  }
}